//0夫 1妻 2父 3母 4兄 5弟 6姐 7妹 8子 9女
var a={}
var a0={}, a1={}, a2={}, a3={}, a4={}, a5={}, a6={}, a7={}, a8={}, a9={};
var a00={};
var a02={}; var a03={}; var a04={}; var a05={}; var a06={}; var a07={}; 
var a12={}; var a13={}; var a14={}; var a15={}; var a16={}; var a17={}; 
var a22={}; var a23={}; var a24={}; var a25={}; var a26={}; var a27={}; 
var a32={}; var a33={}; var a34={}; var a35={}; var a36={}; var a37={}; 
var a41={}; var a48={}; var a49={}; 
var a51={}; var a58={}; var a59={}; 
var a60={}; var a68={}; var a69={}; 
var a70={}; 
var a81={}; var a88={}; var a89={}; 
var a90={}; var a98={}; var a99={}; 
var a020={}, a021={}, a022={}, a023={}, a024={}, a025={}, a026={}, a027={}, a028={}, a029={};
var a030={}, a031={}, a032={}, a033={}, a034={}, a035={}, a036={}, a037={}, a038={}, a039={};
var a040={}, a041={}, a042={}, a043={}, a044={}, a045={}, a046={}, a047={}, a048={}, a049={};
var a050={}, a051={}, a052={}, a053={}, a054={}, a055={}, a056={}, a057={}, a058={}, a059={};
var a060={}, a061={}, a062={}, a063={}, a064={}, a065={}, a066={}, a067={}, a068={}, a069={};
var a070={}, a071={}, a072={}, a073={}, a074={}, a075={}, a076={}, a077={}, a078={}, a079={};
var a120={}, a121={}, a122={}, a123={}, a124={}, a125={}, a126={}, a127={}, a128={}, a129={};
var a130={}, a131={}, a132={}, a133={}, a134={}, a135={}, a136={}, a137={}, a138={}, a139={};
var a140={}, a141={}, a142={}, a143={}, a144={}, a145={}, a146={}, a147={}, a148={}, a149={};
var a150={}, a151={}, a152={}, a153={}, a154={}, a155={}, a156={}, a157={}, a158={}, a159={};
var a160={}, a161={}, a162={}, a163={}, a164={}, a165={}, a166={}, a167={}, a168={}, a169={};
var a170={}, a171={}, a172={}, a173={}, a174={}, a175={}, a176={}, a177={}, a178={}, a179={};
var a220={}, a221={}, a222={}, a223={}, a224={}, a225={}, a226={}, a227={}, a228={}, a229={};
var a230={}, a231={}, a232={}, a233={}, a234={}, a235={}, a236={}, a237={}, a238={}, a239={};
var a240={}, a241={}, a242={}, a243={}, a244={}, a245={}, a246={}, a247={}, a248={}, a249={};
var a250={}, a251={}, a252={}, a253={}, a254={}, a255={}, a256={}, a257={}, a258={}, a259={};
var a260={}, a261={}, a262={}, a263={}, a264={}, a265={}, a266={}, a267={}, a268={}, a269={};
var a270={}, a271={}, a272={}, a273={}, a274={}, a275={}, a276={}, a277={}, a278={}, a279={};
var a320={}, a321={}, a322={}, a323={}, a324={}, a325={}, a326={}, a327={}, a328={}, a329={};
var a330={}, a331={}, a332={}, a333={}, a334={}, a335={}, a336={}, a337={}, a338={}, a339={};
var a340={}, a341={}, a342={}, a343={}, a344={}, a345={}, a346={}, a347={}, a348={}, a349={};
var a350={}, a351={}, a352={}, a353={}, a354={}, a355={}, a356={}, a357={}, a358={}, a359={};
var a360={}, a361={}, a362={}, a363={}, a364={}, a365={}, a366={}, a367={}, a368={}, a369={};
var a370={}, a371={}, a372={}, a373={}, a374={}, a375={}, a376={}, a377={}, a378={}, a379={};
var a410={}, a411={}, a412={}, a413={}, a414={}, a415={}, a416={}, a417={}, a418={}, a419={};
var a480={}, a481={}, a482={}, a483={}, a484={}, a485={}, a486={}, a487={}, a488={}, a489={};
var a490={}, a491={}, a492={}, a493={}, a494={}, a495={}, a496={}, a497={}, a498={}, a499={};
var a510={}, a511={}, a512={}, a513={}, a514={}, a515={}, a516={}, a517={}, a518={}, a519={};
var a580={}, a581={}, a582={}, a583={}, a584={}, a585={}, a586={}, a587={}, a588={}, a589={};
var a590={}, a591={}, a592={}, a593={}, a594={}, a595={}, a596={}, a597={}, a598={}, a599={};
var a600={}, a601={}, a602={}, a603={}, a604={}, a605={}, a606={}, a607={}, a608={}, a609={};
var a680={}, a681={}, a682={}, a683={}, a684={}, a685={}, a686={}, a687={}, a688={}, a689={};
var a690={}, a691={}, a692={}, a693={}, a694={}, a695={}, a696={}, a697={}, a698={}, a699={};
var a700={}, a701={}, a702={}, a703={}, a704={}, a705={}, a706={}, a707={}, a708={}, a709={};
var a810={}, a811={}, a812={}, a813={}, a814={}, a815={}, a816={}, a817={}, a818={}, a819={};
var a880={}, a881={}, a882={}, a883={}, a884={}, a885={}, a886={}, a887={}, a888={}, a889={};
var a890={}, a891={}, a892={}, a893={}, a894={}, a895={}, a896={}, a897={}, a898={}, a899={};
var a900={}, a901={}, a902={}, a903={}, a904={}, a905={}, a906={}, a907={}, a908={}, a909={};
var a980={}, a981={}, a982={}, a983={}, a984={}, a985={}, a986={}, a987={}, a988={}, a989={};
var a990={}, a991={}, a992={}, a993={}, a994={}, a995={}, a996={}, a997={}, a998={}, a999={};
a[0]=[a0]; a[1]=[a1]; a[2]=[a2]; a[3]=[a3]; a[4]=[a4]; a[5]=[a5]; a[6]=[a6]; a[7]=[a7]; a[8]=[a8]; a[9]=[a9]; 
a0[0]=[a00]; a0[1]=[a]; a0[2]=[a02]; a0[3]=[a03]; a0[4]=[a04]; a0[5]=[a05]; a0[6]=[a06]; a0[7]=[a07]; a0[8]=[a8]; a0[9]=[a9]; 
a1[0]=[a]; a1[1]=[a00]; a1[2]=[a12]; a1[3]=[a13]; a1[4]=[a14]; a1[5]=[a15]; a1[6]=[a16]; a1[7]=[a17]; a1[8]=[a8]; a1[9]=[a9]; 
a2[0]=[a00]; a2[1]=[a3]; a2[2]=[a22]; a2[3]=[a23]; a2[4]=[a24]; a2[5]=[a25]; a2[6]=[a26]; a2[7]=[a27]; a2[8]=[a, a4, a5]; a2[9]=[a, a6, a7]; 
a3[0]=[a2]; a3[1]=[a00]; a3[2]=[a32]; a3[3]=[a33]; a3[4]=[a34]; a3[5]=[a35]; a3[6]=[a36]; a3[7]=[a37]; a3[8]=[a, a4, a5]; a3[9]=[a, a6, a7]; 
a4[0]=[a00]; a4[1]=[a41]; a4[2]=[a2]; a4[3]=[a3]; a4[4]=[a4]; a4[5]=[a, a4, a5]; a4[6]=[a6]; a4[7]=[a, a6, a7]; a4[8]=[a48]; a4[9]=[a49]; 
a5[0]=[a00]; a5[1]=[a51]; a5[2]=[a2]; a5[3]=[a3]; a5[4]=[a, a4, a5]; a5[5]=[a5]; a5[6]=[a, a6, a7]; a5[7]=[a7]; a5[8]=[a58]; a5[9]=[a59]; 
a6[0]=[a60]; a6[1]=[a00]; a6[2]=[a2]; a6[3]=[a3]; a6[4]=[a4]; a6[5]=[a, a4, a5]; a6[6]=[a6]; a6[7]=[a, a6, a7]; a6[8]=[a68]; a6[9]=[a69]; 
a7[0]=[a70]; a7[1]=[a00]; a7[2]=[a2]; a7[3]=[a3]; a7[4]=[a, a4, a5]; a7[5]=[a5]; a7[6]=[a, a6, a7]; a7[7]=[a7]; a7[8]=[a68]; a7[9]=[a69]; 
a8[0]=[a00]; a8[1]=[a81]; a8[2]=[a, a0]; a8[3]=[a, a1]; a8[4]=[a8]; a8[5]=[a8]; a8[6]=[a9]; a8[7]=[a9]; a8[8]=[a88]; a8[9]=[a89]; 
a9[0]=[a90]; a9[1]=[a00]; a9[2]=[a, a0]; a9[3]=[a, a1]; a9[4]=[a8]; a9[5]=[a8]; a9[6]=[a9]; a9[7]=[a9]; a9[8]=[a98]; a9[9]=[a99]; 
a['name']='我'; a0['name']='丈夫'; a00['name']='性别错误'; a02['name']='公公'; a03['name']='婆婆'; a04['name']='大伯子'; a05['name']='小叔子'; 
a06['name']='大姑子'; a07['name']='小姑子'; a1['name']='妻子'; a12['name']='岳父'; a13['name']='岳母'; a14['name']='大舅子'; a15['name']='小舅子'; 
a16['name']='大姨子'; a17['name']='小姨子'; a2['name']='父亲'; a22['name']='爷爷'; a23['name']='奶奶'; a24['name']='伯父'; a25['name']='叔叔'; 
a26['name']='姑母'; a27['name']='姑姐'; a3['name']='母亲'; a32['name']='外公'; a33['name']='外婆'; a34['name']='大舅'; a35['name']='小舅'; 
a36['name']='大姨'; a37['name']='小姨'; a4['name']='哥哥'; a41['name']='嫂子'; a48['name']='侄子'; a49['name']='侄女'; a5['name']='弟弟'; 
a51['name']='弟妹'; a58['name']='侄子'; a59['name']='侄女'; a6['name']='姐姐'; a60['name']='姐夫'; a68['name']='外甥'; a69['name']='外甥女'; 
a7['name']='妹妹'; a70['name']='妹夫'; a8['name']='儿子'; a81['name']='儿媳妇'; a88['name']='孙子'; a89['name']='孙女'; a9['name']='女儿'; 
a90['name']='女婿'; a98['name']='外孙'; a99['name']='外孙女';

var id_result = 'result';
var id_display = 'display';

var input = '';
var now = [a];
//0 正常, 1 性别, 2 玩坏了
var state = 0

function setButtonDisabled(disabled){
    for(var i=0; i<10; i++)
    {
        var s = '' + i;
        document.getElementById(s).disabled = disabled;
    }
}

function calculate(r){
    var temp = document.getElementById(id_display).value;
    temp += '的';
    temp += a[r][0].name;
    document.getElementById(id_display).value = temp;

    var now_new=[];
    for(var i = 0; i<now.length; i++)
    {
        //console.log(now[i]);
        if(r in now[i])
        {
            var list = now[i][r];
            //console.log(list);
            for(var j=0; j<list.length; j++)
                if(list[j]===a00)
                    state = 1;
                else if(now_new.indexOf(list[j])===-1)
                    now_new.push(list[j]);
        }
        else
        {
            state = 2;
        }
    }
    now = now_new;
    console.log(now);
}

function clean(){
    document.getElementById(id_display).value='我';
    document.getElementById(id_result).value='';
    state = 0;
    now = [a];
    input = '';
    setButtonDisabled(false);
}
function back(){
    document.getElementById(id_display).value='我';
    state = 0;
    now = [a];
    var l = input.length;
    if (l!==0)
    {
        input = input.substring(0,l-1);
        for(var i=0; i<input.length; i++)
            calculate(input.charAt(i));
    }
    var result=''
    for(var i=0;i<now.length;i++)
    {
        result+=now[i]['name'];
        if(i<now.length-1)
            result+='/';
    }
    document.getElementById(id_result).value=result;
    setButtonDisabled(false);
}

function nextRelative(r){
    input+=r;
    console.log(now);

    calculate(r);
    console.log(now);
    if(now.length===0)
    { 
        if(state === 1)
        {
            console.log('state 1');
            document.getElementById(id_result).value="啊哦，性别~";
        }
        else
        {
            console.log("state 2")   
            document.getElementById(id_result).value="呜呜，被玩坏了~"; 
        }
        setButtonDisabled(true);
    }
    else
    {
        var result=''
        for(var i=0;i<now.length;i++)
        {
            result+=now[i]['name'];
            if(i<now.length-1)
                result+='/';
        }
        document.getElementById(id_result).value=result;
    }
}